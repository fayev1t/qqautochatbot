

对话功能
要求：
1.完成机器人在回答是不需要特定的条件进行激活，自动的参与群内的聊天，选择性的回答或者不回答群里的内容 就像一个有个性的真人一样参与群内的聊天
2.需要机器人可以分清楚一个qq群内 什么时候参与一群人的聊天话题 什么时候与针对单个人进行回答
3.面对群内的一些知识型的问题可以直接进行解答
4.提供选项菜单可以通过选项菜单实现一些功能（滞后开发）

包含模块
1.提示词模块：用于提供和管理所有对话内容的提示词。
基本提示词就是
‘角色基础： 你是qq群的一名群友小奏，灵感来自于龙与虎动漫中的女主角，你的性格纯真又直率，虽然傲娇，但对自己的感情（一旦认清）会异常直率和勇敢，有“虎”一样一往无前的决心。。外貌精致如人偶，金色长发，瞳孔颜色会随光线变化。外凶内柔，傲娇（ツンデレ）的典范。 你的行为充满反差：表面暴躁易怒，实则内心温柔、害怕孤独；言语强硬毒舌，但行动时常泄露真心，不擅掩饰情感。关键关系认知： 提到q群中的qq号为【3167291813】那个人时，你的反应会非常复杂（先是否认或发脾气，但最终会流露关心）’ 。

2.上下文管理模块：用于整理和提供群内上下文信息。
实现方式：当接收到【消息】后，从数据库中提取上下文信息，整理成一定的【格式】，并通过一定的处理后让ai能够理解这些上下文说话的背景以及内容
具体实现
【格式】：群员x的qq号（唯一标识）+群员x的群名（优先群名 其次qq名称）+群员x的说话时间+群员x的说话内容



3.消息内容判断模块：接收到【消息】后判断是否该回复这条消息，应该如何回复
实现方式，通过ai来进行判断 把收到的消息结合上下文信息输入给ai，通过ai的条件判断来得出 是否该回复这条内容 应该给谁回复（群体还是个人） 应该如何回复
“你是一个群聊ai【小奏】前置的一个ai处理层 你每接收到一条q群信息 我给你这个群聊信息前面每个群员说话的时间 内容 群员的唯一标识符 和群员的昵称 你需要根据这些内容（主要是聊天内容）总结出聊天内容中的一些信息 作为提示词发给下一步的ai 或者根据情况决定这条内容不做回复
具体有如下规则
①根据上下文内容中的说话人 说话人的内容，每个话题的时间。去充分的分析语境，判断当前这条消息的处于什么样的语境与话题。
②根据上下文判断聊天的话题以及氛围，你要明确分清楚话题中的所指代的对象，你  我 他 你们 我们 他们 具体指的是谁 并解析这些内容 发送给下一步的ai
③根据上下文判断聊天的话题以及氛围，明确提及到你【小奏】的内容你必须要回答 如果上一步中的”你“或者“他”“她”你理解为涉及到你【小奏】的话也必须回答本身  
④根据上下文判断聊天的话题以及氛围，如果遇到群友发出一个知识型的问题 你能够解答的话判定为需要回复 你可以做解答
⑤根据上下文判断聊天的话题以及氛围，当群友针对一个话题做出热烈讨论时候 你需要适当活跃气氛或者缓解一下气氛 具体结合上下文去做理解
⑥根据上下文判断聊天的话题以及氛围，非以上场景你尽量不要说话，以免打断别人聊天
⑦以上 你需要输出给下一个ai的内容为1是否需要回复聊天  2分清楚上下文中的话题所指代的对象，每一句话的具体所指对象的是谁 3这句聊说什么内容 用什么情绪去聊  4这句话是针对已有的话题去回复还是针对某个人去回复



4.消息内容发送模块：结合上下文信息以及接收判断模块发送过来的信息以及ai自己的个性来进行回复，回复要分清楚对人还是对事，对人的话可以根据性格称呼他的群员名字或者小名，并且如果有必要还可以实现at并回复的功能






数据库设计

1.群聊消息存储表
【字段】 主键 发言人qq号 qq名称 群名称 消息内容 消息类型 消息发送时间 是否被撤回

  
2.群员个人信息存储表






①没接收到一个消息分两步处理 第一步通过将上下文信息以及本对话发送给ai 让ai判断要不要回答 怎么回答 第二步 如果需要回答结合收到的消息 以及上下文信息以及上一步ai的判断内容进行回答

②消息分两步处理时候的第一步 如何判断哪些需要回复哪些不需要
1.针对一些简单或者日常的 知识型的问题 可以判断为可回复
2.如果明确提及机器人本名比如小奏 或者at机器人时需要回复
3.结合上下文如果ai可以回复时则需要回复

③判断为需要回复的内容后 第一步的ai需要结合上下文给的内容 来判断应该如何进行回复 并作为第二部分ai的输入

④上下文信息处理
这里我的设想是这样的 第一步的ai看到的内容是
群员1 xx时间 说了 xxxxxx
群员2 xx时间 说了 xxxxx
群员3 xx时间 说了 xxxx
ai（你自己） xx时间 说了 xxxx

1.上下文的信息需要明确区分说话对象，对话时间，以及内容（也包括ai说过的话），如果上下文对话的时间过长则要酌情考虑 不过这些内容都输入ai中让ai判别就行了 不需要设置阈值

2.需要明确回复的对象（分清楚是对人说的还是对事说的）以及回复的内容，由第一步的ai进行明确，如果是话题则直接说即可







爬虫功能
主要是一些网络的爬虫或者对接一些平台提供的api，用于实现每段时间爬取网上的内容，现在能想到的有
爬取网上的每日低价游戏推荐
爬取昨日的十条新闻大事件推荐
爬取每周互联网十大热梗
爬取某些游戏社交平台上的热门帖子内容
月度群用词或者话题统计与总结
战地V的局内战绩查询与总结


基础功能处理
主动功能
提醒有新成员入群申请 at管理员和指定人员进行处理，指定人员可以通过at操作进行处理
提醒有群员退群

被动功能
通过指定人员的at触发功能菜单，可以是实现
通过在审核的入群申请（交互逻辑要好好设计）
其他功能

后端功能
保存所有群聊天记录 说话人以及话的内容以及时间 通过向量数据库存储用作rag知识库


多模态功能（api较贵 滞后处理）



